<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>C++ Backend</title>
</head>
<body>
    <p id="status"></p>

    <h1>Kalkulator (C++ backend)</h1>

    <input type="number" id="a" placeholder="Liczba A">
    <input type="number" id="b" placeholder="Liczba B">
    <button onclick="send()">Oblicz</button>

    <pre id="result"></pre>

    <script>
        window.onload = function() {
        document.getElementById("status").innerText = "Łączenie z serwerem...";
        fetch("https://cpp-b.onrender.com/")
        .then(res => res.text())
        .then(text => document.getElementById("status").innerText = "status serwera: " + text)
        .catch(err => {console.error(err);
                        document.getElementById("status").innerText = "Błąd połączenia z serwerem";
                      });
            
        };
        function send() {
            const a = document.getElementById("a").value;
            const b = document.getElementById("b").value;

            fetch("https://cpp-b.onrender.com/calculate", {
                method: "POST",
                headers: {
                      "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    a: a,
                    b: b
                })
            })
            .then(res => res.json())
            .then(data => {
                document.getElementById("result").innerText =
                    "Suma: " + data.suma + "\nIloczyn: " + data.iloczyn;
            })
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="pl">
<head>
	<link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <title>stsrv</title>
</head>
<body>
	<div class="container">
    <p id="status"></p>
		<br/>

    <h1>Logowanie / Rejestracja</h1>

    <input type="text" id="log" placeholder="Login">
    <input type="password" id="pass" placeholder="haslo">
    <button onclick="zaloguj()">zaloguj</button>
    <button onclick="zarejestruj()">zarejestruj</button>

    <pre id="result"></pre>
	</div>
    <script>
        window.onload = function() {
        document.getElementById("status").innerText = "Łączenie z serwerem...";
        fetch("https://cpp-b.onrender.com/")
        .then(res => res.text())
        .then(text => document.getElementById("status").innerText = "status serwera: " + text)
        .catch(err => {console.error(err);
                        document.getElementById("status").innerText = "Błąd połączenia z serwerem";
                      });
            
        };

        function send() {
            const a = document.getElementById("a").value;
            const b = document.getElementById("b").value;

            fetch("https://cpp-b.onrender.com/calculate", {
                method: "POST",
                headers: {
                      "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    a: a,
                    b: b
                })
            })
            .then(res => res.json())
            .then(data => {
                document.getElementById("result").innerText =
                    "Suma: " + data.suma + "\nIloczyn: " + data.iloczyn;
            })
        };


	function zaloguj() {
            const log = document.getElementById("log").value;
            const pass = document.getElementById("pass").value;

            fetch("https://cpp-b.onrender.com/login", {
                method: "POST",
                headers: {
                      "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    log: log,
                    pass: pass
                })
            })
            .then(res => res.json())
            .then(data => {
                document.getElementById("result").innerText =
                   data.komunikat;
            })
	document.getElementById("log").value="";
	document.getElementById("pass").value="";
        };


	function zarejestruj() {
            const log = document.getElementById("log").value;
            const pass = document.getElementById("pass").value;

            fetch("https://cpp-b.onrender.com/zarejestruj", {
                method: "POST",
                headers: {
                      "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    log: log,
                    pass: pass
                })
            })
            .then(res => res.json())
            .then(data => {
                document.getElementById("result").innerText =
                   data.komunikat;
            })
	document.getElementById("log").value="";
	document.getElementById("pass").value="";
        };



    </script>
</body>
</html>
